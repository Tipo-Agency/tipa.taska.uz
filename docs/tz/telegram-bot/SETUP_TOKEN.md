# Настройка токена Telegram бота

## Проблема

Токен бота был захардкожен в коде, что создавало проблемы:
- Токен был виден в репозитории
- Сложно было менять токен без изменения кода
- Возможны конфликты при использовании одного токена в разных местах

## Решение

Токен теперь берется из GitHub Actions Secrets и сохраняется в `.env` файл на сервере.

## Настройка

### 1. Добавьте токен в GitHub Secrets

1. Откройте репозиторий на GitHub
2. Перейдите в Settings → Secrets and variables → Actions
3. Нажмите "New repository secret"
4. Имя: `TELEGRAM_BOT_TOKEN`
5. Значение: ваш токен бота (например: `8348357222:AAHzzrWFOE7n3MiGYKgugqXbUSehTW1-D1c`)
6. Нажмите "Add secret"

### 2. Автоматическая настройка при деплое

При каждом деплое GitHub Actions автоматически:
- Создает или обновляет `.env` файл в `telegram-bot/`
- Устанавливает `TELEGRAM_BOT_TOKEN` из secrets
- Устанавливает правильные права доступа (600 - только владелец)

### 3. Ручная настройка (если нужно)

Если нужно настроить токен вручную на сервере:

```bash
cd /var/www/tipa.taska.uz/telegram-bot

# Создайте или отредактируйте .env файл
nano .env

# Добавьте строку:
TELEGRAM_BOT_TOKEN=your_token_here

# Установите права доступа
chmod 600 .env
```

## Проверка

После деплоя проверьте, что токен установлен:

```bash
cd /var/www/tipa.taska.uz/telegram-bot
grep TELEGRAM_BOT_TOKEN .env
```

Должна быть строка с токеном (первые символы будут видны).

## Важно

- `.env` файл НЕ должен быть в git (добавлен в .gitignore)
- Токен хранится только в GitHub Secrets и на сервере в `.env`
- При изменении токена обновите его в GitHub Secrets и перезапустите бота
